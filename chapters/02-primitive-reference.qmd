# Primitive Reference

## Agent

```lua
-- Take a turn (LLM call)
Agent("name").turn()

-- With options
Agent("name").turn({
    inject = "Additional context",
    tools = {"subset"},           -- Override available tools
    temperature = 0.7,
    max_tokens = 1000
})
```

## Tool

```lua
-- Check if called
Tool.called("name")               -- Returns boolean

-- Get last call details
Tool.last_call("name")            -- Returns {args = {...}, result = "..."}

-- Get just result
Tool.last_result("name")          -- Returns result value

-- Direct invocation
local result = my_tool({arg = "value"})
```

## State

```lua
-- Set value
State.set("key", value)

-- Get value
local val = State.get("key")

-- Increment number
State.increment("key")
State.increment("key", 5)         -- Increment by 5
```

## Human

```lua
-- Approval gate
local approved = Human.approve({
    message = "Approve this?",
    context = {key = "value"},
    timeout = 3600,               -- Seconds (optional)
    default = false               -- If timeout (optional)
})

-- Free-form input
local response = Human.input({
    message = "Enter topic:",
    placeholder = "Type here...",
    timeout = nil                 -- Wait forever
})

-- Artifact review
local decision = Human.review({
    message = "Review this document",
    artifact = content,
    artifact_type = "document",
    options = {
        {label = "Approve", type = "action"},
        {label = "Reject", type = "cancel"}
    }
})
```

## Log

```lua
Log.info("Message")
Log.info("Message", {key = "value"})
Log.warn("Warning message")
Log.error("Error message")
```

## Session

```lua
-- Inject system message
Session.inject_system("Focus on security")

-- Get history
local history = Session.history()

-- Clear history
Session.clear()
```

## Procedure

```lua
-- Run sub-procedure
local result = Procedure.run("name", {input = "value"})

-- Async spawn
local handle = Procedure.spawn("name", {input = "value"})

-- Wait for completion
Procedure.wait(handle)
Procedure.wait_all(handles)

-- Check status
local status = Procedure.status(handle)
```

## Checkpoint

```lua
-- Manual checkpoint
checkpoint()
```
